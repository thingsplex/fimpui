{"Id":"YLJqDPU5TO","Name":"Virtual barrier control","Group":"dev template","Description":"Template of virtual barrier control device","Nodes":[{"Id":"1","Type":"trigger","Label":"Set target state","SuccessTransition":"3","TimeoutTransition":"","ErrorTransition":"","Address":"pt:j1/mt:cmd/rt:dev/rn:flow/ad:1/sv:barrier_ctrl/ad:YLJqDPU5TO","Service":"barrier_ctrl","ServiceInterface":"cmd.tstate.set","Config":{"InputVariableType":"","IsValueFilterEnabled":false,"RegisterAsVirtualService":true,"Timeout":0,"ValueFilter":{"Value":"","ValueType":"string"},"VirtualServiceGroup":"gr1","VirtualServiceProps":{"sup_states":["open","closed","closing"],"sup_tstates":["open","close"]}},"Ui":{"nodeType":"","x":70,"y":170}},{"Id":"2","Type":"trigger","Label":"Cmd operation stop","SuccessTransition":"5","TimeoutTransition":"","ErrorTransition":"","Address":"pt:j1/mt:cmd/rt:dev/rn:flow/ad:1/sv:barrier_ctrl/ad:YLJqDPU5TO","Service":"barrier_ctrl","ServiceInterface":"cmd.op.stop","Config":{"InputVariableType":"","IsValueFilterEnabled":false,"RegisterAsVirtualService":true,"Timeout":0,"ValueFilter":{"Value":"","ValueType":"bool"},"VirtualServiceGroup":"gr1","VirtualServiceProps":{"sup_states":["open","closed","closing"],"sup_tstates":["open","close"]}},"Ui":{"nodeType":"","x":278,"y":172}},{"Id":"3","Type":"transform","Label":"map command","SuccessTransition":"4","TimeoutTransition":"","ErrorTransition":"","Address":"","Service":"","ServiceInterface":"","Config":{"IsLVariableGlobal":false,"IsRVariableGlobal":false,"IsTargetVariableGlobal":false,"LVariableName":"","Operation":"add","RValue":{"Value":0,"ValueType":"int"},"RVariableName":"","Rtype":"var","TargetVariableName":"tstate","TargetVariableType":"string","Template":"","TransformType":"map","ValueMapping":[{"LValue":{"Value":"open","ValueType":"string"},"RValue":{"Value":"up","ValueType":"string"}},{"LValue":{"Value":"closed","ValueType":"string"},"RValue":{"Value":"down","ValueType":"string"}},{"LValue":{"ValueType":"string","Value":"stop"},"RValue":{"ValueType":"string","Value":"stop"}}],"XPathMapping":[]},"Ui":{"nodeType":"","x":137,"y":545}},{"Id":"4","Type":"rest_action","Label":"Send Homewizard command","SuccessTransition":"6","TimeoutTransition":"","ErrorTransition":"6","Address":"","Service":"","ServiceInterface":"","Config":{"Auth":{"ClientID":"","ClientSecret":"","Enabled":false,"GrantType":"password","Password":"","Scope":"","Url":"http://","Username":""},"Headers":[{"Name":"Content-type","Value":"application/json"}],"LogResponse":true,"Method":"GET","RequestPayloadType":"json","RequestTemplate":"","ResponseMapping":[],"Url":"http://192.168.1.7:70/Yatvcj1homewizard/sf/40/{{ variable \"tstate\" false }}"},"Ui":{"nodeType":"","x":115,"y":744}},{"Id":"5","Type":"set_variable","Label":"set STOP","SuccessTransition":"3","TimeoutTransition":"","ErrorTransition":"","Address":"","Service":"","ServiceInterface":"","Config":{"DefaultValue":{"Value":"stop","ValueType":"string"},"Name":"stop","UpdateGlobal":false,"UpdateInputMsg":true},"Ui":{"nodeType":"","x":265,"y":362}},{"Id":"6","Type":"transform","Label":"map response","SuccessTransition":"7","TimeoutTransition":"","ErrorTransition":"","Address":"","Service":"","ServiceInterface":"","Config":{"IsLVariableGlobal":false,"IsRVariableGlobal":false,"LVariableName":"tstate","Operation":"add","RValue":{"Value":0,"ValueType":"int"},"RVariableName":"","Rtype":"var","TargetVariableName":"","Template":"","TransformType":"map","ValueMapping":[{"LValue":{"Value":"up","ValueType":"string"},"RValue":{"Value":"open","ValueType":"string"}},{"LValue":{"Value":"down","ValueType":"string"},"RValue":{"Value":"closed","ValueType":"string"}},{"LValue":{"Value":"stop","ValueType":"string"},"RValue":{"Value":"open","ValueType":"string"}}],"XPathMapping":[]},"Ui":{"nodeType":"","x":109,"y":903}},{"Id":"7","Type":"action","Label":"Send state","SuccessTransition":"","TimeoutTransition":"","ErrorTransition":"","Address":"pt:j1/mt:evt/rt:dev/rn:flow/ad:1/sv:barrier_ctrl/ad:YLJqDPU5TO","Service":"barrier_ctrl","ServiceInterface":"evt.state.report","Config":{"DefaultValue":{"Value":"","ValueType":""},"Props":{},"RegisterAsVirtualService":true,"VariableName":"","VirtualServiceGroup":"gr1","VirtualServiceProps":{}},"Ui":{"nodeType":"","x":101,"y":1126}}]}